name: Deploy to GCE
  on:
    push:
      branches: 
        - master

jobs:
  deploy:
    runs-on: ubuntu-latest

    uses: actions/checkout@v4

    - name: ssh into instance and deploy image
      uses: appleboy/ssh-action@1.0.3
      with: 
        host: ${{ secrets.HOST }}
        username: ${{secrets.USERNAME}}
        key: ${{secrets.SSH_PRIVATE_KEY}}
        script: |
          git pull origin master
          docker-compose - /path/to/docker-compose.yml up

